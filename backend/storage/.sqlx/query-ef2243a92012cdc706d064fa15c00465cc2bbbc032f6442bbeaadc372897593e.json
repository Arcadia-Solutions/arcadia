{
  "db_name": "PostgreSQL",
  "query": "\n            UPDATE users\n            SET\n                highest_streak = GREATEST(\n                    highest_streak,\n                    CASE\n                        WHEN last_seen::date = CURRENT_DATE - INTERVAL '1 day' THEN current_streak + 1\n                        WHEN last_seen::date < CURRENT_DATE - INTERVAL '1 day' THEN 1\n                        ELSE current_streak\n                    END\n                ),\n                current_streak = CASE\n                    WHEN last_seen::date = CURRENT_DATE - INTERVAL '1 day' THEN current_streak + 1\n                    WHEN last_seen::date < CURRENT_DATE - INTERVAL '1 day' THEN 1\n                    ELSE current_streak\n                END,\n                last_seen = NOW()\n            WHERE id = $1\n            ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Int4"
      ]
    },
    "nullable": []
  },
  "hash": "ef2243a92012cdc706d064fa15c00465cc2bbbc032f6442bbeaadc372897593e"
}
