{
  "db_name": "PostgreSQL",
  "query": "\n\t\t\tSELECT\n\t\t\t\tjson_build_object(\n\t\t\t\t\t'id', sp.id,\n\t\t\t\t\t'created_at', sp.created_at,\n\t\t\t\t\t'subject', sp.subject,\n\t\t\t\t\t'created_by', json_build_object(\n\t\t\t\t\t\t'id', u_creator.id,\n\t\t\t\t\t\t'username', u_creator.username,\n\t\t\t\t\t\t'banned', u_creator.banned,\n\t\t\t\t\t\t'avatar', u_creator.avatar,\n\t\t\t\t\t\t'warned', u_creator.warned\n\t\t\t\t\t),\n\t\t\t\t\t'resolved', sp.resolved,\n\t\t\t\t\t'messages', (\n\t\t\t\t\t\tSELECT json_agg(json_build_object(\n\t\t\t\t\t\t\t'id', m.id,\n\t\t\t\t\t\t\t'created_at', m.created_at,\n\t\t\t\t\t\t\t'created_by', json_build_object(\n\t\t\t\t\t\t\t\t'id', u_msg.id,\n\t\t\t\t\t\t\t\t'username', u_msg.username,\n\t\t\t\t\t\t\t\t'banned', u_msg.banned,\n\t\t\t\t\t\t\t\t'avatar', u_msg.avatar,\n\t\t\t\t\t\t\t\t'warned', u_msg.warned\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t'content', m.content\n\t\t\t\t\t\t) ORDER BY m.created_at ASC)\n\t\t\t\t\t\tFROM staff_pm_messages m\n\t\t\t\t\t\tINNER JOIN users u_msg ON m.created_by_id = u_msg.id\n\t\t\t\t\t\tWHERE m.staff_pm_id = sp.id\n\t\t\t\t\t)\n\t\t\t\t) AS \"conversation: serde_json::Value\"\n\t\t\tFROM staff_pms sp\n\t\t\tINNER JOIN users u_creator ON sp.created_by_id = u_creator.id\n\t\t\tWHERE sp.id = $1 AND (($3)::bool OR sp.created_by_id = $2);\n\t\t\t",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "conversation: serde_json::Value",
        "type_info": "Json"
      }
    ],
    "parameters": {
      "Left": [
        "Int8",
        "Int8",
        "Bool"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "495f12ee6e8ff5a41580375527edffab50b210cad56bb2a2491466a2599a6624"
}
